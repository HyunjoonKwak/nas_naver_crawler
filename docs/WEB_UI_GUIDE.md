# 웹 UI 사용 가이드

## 🌐 웹 UI 소개

Next.js 기반의 사용자 친화적인 웹 인터페이스를 통해 네이버 부동산 크롤러를 쉽게 관리할 수 있습니다.

## 🚀 시작하기

### 1. 웹 서버 시작
```bash
./start_web.sh
```

### 2. 브라우저에서 접속
- **로컬**: `http://localhost:3000`
- **NAS**: `http://[NAS-IP주소]:3000`
- **예시**: `http://192.168.1.100:3000`

## 🎨 주요 기능

### 1. 크롤링 실행
- 단지 번호를 입력하고 "크롤링 시작" 버튼 클릭
- 여러 단지를 동시에 크롤링 (쉼표로 구분)
- 실시간 진행 상태 표시

### 2. 시스템 상태 모니터링
- Docker 이미지 상태
- 실행 중인 컨테이너 수
- 크롤링된 파일 개수
- 자동 업데이트 (10초마다)

### 3. 크롤링 히스토리
- 과거 크롤링 결과 조회
- 파일 크기, 생성 일시 확인
- 상세 데이터 보기 (JSON)

## 📱 화면 구성

### 메인 대시보드
```
┌─────────────────────────────────────────────────────┐
│  🏠 네이버 부동산 크롤러                             │
├─────────────────────────────────────────────────────┤
│                                                     │
│  [크롤링 폼]                    [시스템 상태]        │
│  - 단지 번호 입력                - Docker 상태       │
│  - 크롤링 시작 버튼              - 데이터 개수       │
│  - 진행 상태 표시                - 실행 중 작업      │
│                                                     │
├─────────────────────────────────────────────────────┤
│  [크롤링 히스토리]                                  │
│  - 과거 크롤링 결과                                 │
│  - 상세 보기                                        │
│  - 새로고침                                         │
└─────────────────────────────────────────────────────┘
```

## 🔧 관리 명령어

### 웹 서버 제어
```bash
# 시작
./start_web.sh

# 중지
docker-compose down

# 재시작
docker-compose restart web

# 로그 확인
docker-compose logs -f web
```

### 상태 확인
```bash
# 컨테이너 상태
docker-compose ps

# 리소스 사용량
docker stats naver-crawler-web
```

## 🌍 외부 접속 설정

### 방화벽 설정
```bash
# 포트 3000 열기 (예: Ubuntu/Debian)
sudo ufw allow 3000

# 또는 포트 포워딩 설정
```

### NAS별 설정

#### Synology DSM
1. 제어판 → 외부 액세스 → 라우터 구성
2. 포트 포워딩 규칙 추가: 3000 → 3000

#### QNAP QTS
1. myQNAPcloud → 자동 라우터 구성
2. 포트 포워딩: 3000

## 📊 API 엔드포인트

웹 UI는 다음 API를 사용합니다:

### POST /api/crawl
크롤링 실행
```json
{
  "complexNumbers": ["22065", "12345"]
}
```

### GET /api/results
크롤링 결과 조회
```json
{
  "results": [...],
  "total": 10
}
```

### GET /api/status
시스템 상태 확인
```json
{
  "docker": {...},
  "data": {...},
  "status": "ready"
}
```

## 💡 팁

### 1. 모바일에서 접속
- 모바일 브라우저에서도 완벽하게 작동
- 반응형 디자인 지원

### 2. 북마크 추가
- 자주 사용하는 경우 브라우저 북마크 추가
- PWA로 설치 가능 (추후 지원)

### 3. 다크 모드
- 시스템 설정에 따라 자동 전환

## 🔒 보안

### 포트 보안
```bash
# 로컬 네트워크에서만 접속하도록 설정
# docker-compose.yml에서:
ports:
  - "127.0.0.1:3000:3000"  # 로컬만
  - "3000:3000"            # 외부 접속 허용
```

### 인증 추가 (선택사항)
- Next.js Auth 또는 Basic Auth 설정
- API 키 기반 인증

## 🐛 문제 해결

### 웹 페이지가 열리지 않음
```bash
# 서비스 상태 확인
docker-compose ps

# 로그 확인
docker-compose logs web
```

### 크롤링이 실행되지 않음
```bash
# Docker 소켓 권한 확인
ls -la /var/run/docker.sock

# 컨테이너에서 Docker 명령어 테스트
docker exec -it naver-crawler-web docker ps
```

---

자세한 내용은 [README_NAS.md](README_NAS.md)를 참고하세요.
