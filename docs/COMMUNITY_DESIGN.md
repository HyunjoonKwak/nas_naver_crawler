# ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ ì„¤ê³„ ë¬¸ì„œ (ë‹¨ìˆœí™” ë²„ì „)

## ğŸ“‹ ëª©ì°¨
1. [ê°œìš”](#ê°œìš”)
2. [í•µì‹¬ ê¸°ëŠ¥](#í•µì‹¬-ê¸°ëŠ¥)
3. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
4. [API ì„¤ê³„](#api-ì„¤ê³„)
5. [UI/UX ì„¤ê³„](#uiux-ì„¤ê³„)
6. [êµ¬í˜„ ë‹¨ê³„](#êµ¬í˜„-ë‹¨ê³„)
7. [ë³´ì•ˆ ë° ê¶Œí•œ](#ë³´ì•ˆ-ë°-ê¶Œí•œ)

---

## ê°œìš”

### ëª©ì 
ë¶€ë™ì‚° ì¸ì‚¬ì´íŠ¸ í”Œë«í¼ ì‚¬ìš©ìë“¤ì´ ì •ë³´ë¥¼ ê³µìœ í•˜ê³  ì†Œí†µí•  ìˆ˜ ìˆëŠ” ë‹¨ìˆœí•˜ê³  ì‹¤ìš©ì ì¸ ì»¤ë®¤ë‹ˆí‹° ê³µê°„ ì œê³µ

### í•µì‹¬ ê°€ì¹˜
- **ë‹¨ìˆœí•¨**: 3ê°œì˜ ëª…í™•í•œ ê²Œì‹œíŒ (ììœ , Q&A, ê³µì§€)
- **ì‹¤ìš©ì„±**: í•„ìˆ˜ ê¸°ëŠ¥ì—ë§Œ ì§‘ì¤‘
- **í¸ì˜ì„±**: ëª¨ë°”ì¼ ìµœì í™” ë° ì•Œë¦¼

---

## í•µì‹¬ ê¸°ëŠ¥

### 1. ê²Œì‹œíŒ ì‹œìŠ¤í…œ (3ê°œë§Œ)

#### 1.1 ì¹´í…Œê³ ë¦¬ êµ¬ì¡°
```
/community
â”œâ”€â”€ ììœ  ê²Œì‹œíŒ (FREE)
â”‚   â””â”€â”€ ì¼ë°˜ ë¶€ë™ì‚° ì •ë³´, ë‰´ìŠ¤, ì´ìŠˆ, ì˜ê²¬ ê³µìœ 
â”œâ”€â”€ Q&A (QNA)
â”‚   â””â”€â”€ ì§ˆë¬¸ê³¼ ë‹µë³€, ì±„íƒ ì‹œìŠ¤í…œ
â””â”€â”€ ê³µì§€ì‚¬í•­ (NOTICE)
    â””â”€â”€ ê´€ë¦¬ì ê³µì§€ (ì½ê¸° ì „ìš©)
```

**ì œê±°ëœ ê²ƒë“¤:**
- âŒ ë‹¨ì§€ë³„ ê²Œì‹œíŒ (ë³µì¡ë„ ì¦ê°€)
- âŒ ê±°ë˜ í›„ê¸° ê²Œì‹œíŒ (ì‹¤ê±°ë˜ ê²€ì¦ ë³µì¡)

#### 1.2 ê²Œì‹œê¸€ ê¸°ëŠ¥
- **ì‘ì„±**: ì œëª©, ë‚´ìš©, ì¹´í…Œê³ ë¦¬, ì´ë¯¸ì§€ ì²¨ë¶€ (ì„ íƒ)
- **ìˆ˜ì •/ì‚­ì œ**: ì‘ì„±ì ë³¸ì¸ë§Œ ê°€ëŠ¥
- **ì¡°íšŒ**: ì¡°íšŒìˆ˜ ì¹´ìš´íŠ¸
- **ê²€ìƒ‰**: ì œëª©+ë‚´ìš© ê²€ìƒ‰
- **ì •ë ¬**: ìµœì‹ ìˆœ, ì¸ê¸°ìˆœ (ì¢‹ì•„ìš”ìˆœ)

#### 1.3 ëŒ“ê¸€ ì‹œìŠ¤í…œ
- **ë‹¨ìˆœ ëŒ“ê¸€**: 1ë‹¨ê³„ë§Œ (ëŒ€ëŒ“ê¸€ ì—†ìŒ)
- **ê¸°ëŠ¥**: ì‘ì„±, ìˆ˜ì •, ì‚­ì œ
- **ì•Œë¦¼**: ë‚´ ê²Œì‹œê¸€ì— ëŒ“ê¸€ ì‘ì„± ì‹œ ì•Œë¦¼

#### 1.4 ìƒí˜¸ì‘ìš©
- **ì¢‹ì•„ìš”**: ê²Œì‹œê¸€ì—ë§Œ (ëŒ“ê¸€ ì¢‹ì•„ìš” ì œì™¸)
- **ì‹ ê³ **: ë¶€ì ì ˆí•œ ê²Œì‹œê¸€/ëŒ“ê¸€ ì‹ ê³ 

**ì œê±°ëœ ê²ƒë“¤:**
- âŒ ë¶ë§ˆí¬ (ë³µì¡ë„ ì¦ê°€)
- âŒ ëŒ“ê¸€ ì¢‹ì•„ìš”
- âŒ ëŒ€ëŒ“ê¸€ (1ë‹¨ê³„ ëŒ“ê¸€ë§Œ)

### 2. Q&A ì±„íƒ ì‹œìŠ¤í…œ

#### 2.1 ì§ˆë¬¸ ê²Œì‹œê¸€
- Q&A ì¹´í…Œê³ ë¦¬ ê²Œì‹œê¸€ì€ "ì§ˆë¬¸" ìƒíƒœ
- ì‘ì„±ìê°€ ëŒ“ê¸€ ì¤‘ í•˜ë‚˜ë¥¼ "ì±„íƒ"í•  ìˆ˜ ìˆìŒ
- ì±„íƒë˜ë©´ ê²Œì‹œê¸€ ìƒíƒœê°€ "í•´ê²°ë¨"ìœ¼ë¡œ ë³€ê²½

#### 2.2 ì±„íƒ í‘œì‹œ
```typescript
interface Post {
  // ... ê¸°ë³¸ í•„ë“œ
  isResolved: boolean;      // Q&A í•´ê²° ì—¬ë¶€
  acceptedCommentId: string | null;  // ì±„íƒëœ ëŒ“ê¸€ ID
}
```

### 3. ì‚¬ìš©ì ì‹œìŠ¤í…œ (ë‹¨ìˆœí™”)

#### 3.1 í”„ë¡œí•„ (ìµœì†Œ)
- ë‹‰ë„¤ì„ (User name)
- í™œë™ í†µê³„ (ì‘ì„± ê¸€, ëŒ“ê¸€ ìˆ˜)

**ì œê±°ëœ ê²ƒë“¤:**
- âŒ ë“±ê¸‰/ë ˆë²¨ ì‹œìŠ¤í…œ
- âŒ ë±ƒì§€ ì‹œìŠ¤í…œ
- âŒ í¬ì¸íŠ¸ ì‹œìŠ¤í…œ

### 4. ì•Œë¦¼ ì‹œìŠ¤í…œ (ìµœì†Œ)

#### 4.1 ì•Œë¦¼ íƒ€ì… (3ê°€ì§€ë§Œ)
- ëŒ“ê¸€ ì•Œë¦¼: ë‚´ ê²Œì‹œê¸€ì— ëŒ“ê¸€ ì‘ì„±
- ì±„íƒ ì•Œë¦¼: ë‚´ ëŒ“ê¸€ì´ ì±„íƒë¨
- ê³µì§€ ì•Œë¦¼: ìƒˆ ê³µì§€ì‚¬í•­

**ì œê±°ëœ ê²ƒë“¤:**
- âŒ ì¢‹ì•„ìš” ì•Œë¦¼
- âŒ ë©˜ì…˜ ì•Œë¦¼
- âŒ ëŒ€ëŒ“ê¸€ ì•Œë¦¼

---

## ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### Prisma Schema (ë‹¨ìˆœí™”)

```prisma
// ============================================
// ê²Œì‹œíŒ ê´€ë ¨ ëª¨ë¸
// ============================================

// ê²Œì‹œê¸€
model Post {
  id            String       @id @default(cuid())
  title         String
  content       String       @db.Text
  category      PostCategory

  // ì‘ì„±ì
  authorId      String
  author        User         @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // í†µê³„
  views         Int          @default(0)
  likesCount    Int          @default(0)

  // Q&A ì „ìš©
  isResolved    Boolean      @default(false)
  acceptedCommentId String?

  // ê´€ê³„
  likes         PostLike[]
  comments      Comment[]
  reports       PostReport[]
  images        PostImage[]

  // ìƒíƒœ
  isPinned      Boolean      @default(false)  // ê³µì§€ ê³ ì •
  isDeleted     Boolean      @default(false)  // ì†Œí”„íŠ¸ ì‚­ì œ

  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt

  @@index([category])
  @@index([authorId])
  @@index([createdAt])
  @@index([isPinned])
  @@map("posts")
}

// ê²Œì‹œê¸€ ì¹´í…Œê³ ë¦¬ (3ê°œë§Œ)
enum PostCategory {
  FREE      // ììœ ê²Œì‹œíŒ
  QNA       // Q&A
  NOTICE    // ê³µì§€ì‚¬í•­
}

// ê²Œì‹œê¸€ ì´ë¯¸ì§€ (ì„ íƒ)
model PostImage {
  id        String   @id @default(cuid())
  postId    String
  post      Post     @relation(fields: [postId], references: [id], onDelete: Cascade)
  url       String
  filename  String
  size      Int
  order     Int      @default(0)
  createdAt DateTime @default(now())

  @@index([postId])
  @@map("post_images")
}

// ëŒ“ê¸€ (1ë‹¨ê³„ë§Œ)
model Comment {
  id        String    @id @default(cuid())
  content   String    @db.Text

  // ê²Œì‹œê¸€
  postId    String
  post      Post      @relation(fields: [postId], references: [id], onDelete: Cascade)

  // ì‘ì„±ì
  authorId  String
  author    User      @relation(fields: [authorId], references: [id], onDelete: Cascade)

  // ì±„íƒ ì—¬ë¶€ (Q&Aìš©)
  isAccepted Boolean  @default(false)

  // ê´€ê³„
  reports   CommentReport[]

  // ìƒíƒœ
  isDeleted Boolean   @default(false)

  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  @@index([postId])
  @@index([authorId])
  @@map("comments")
}

// ê²Œì‹œê¸€ ì¢‹ì•„ìš”
model PostLike {
  id        String   @id @default(cuid())
  postId    String
  post      Post     @relation(fields: [postId], references: [id], onDelete: Cascade)
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([postId, userId])
  @@index([postId])
  @@index([userId])
  @@map("post_likes")
}

// ê²Œì‹œê¸€ ì‹ ê³ 
model PostReport {
  id        String       @id @default(cuid())
  postId    String
  post      Post         @relation(fields: [postId], references: [id], onDelete: Cascade)
  reporterId String
  reporter  User         @relation(fields: [reporterId], references: [id], onDelete: Cascade)
  reason    ReportReason
  detail    String?      @db.Text
  status    ReportStatus @default(PENDING)
  createdAt DateTime     @default(now())

  @@index([postId])
  @@index([reporterId])
  @@index([status])
  @@map("post_reports")
}

// ëŒ“ê¸€ ì‹ ê³ 
model CommentReport {
  id         String       @id @default(cuid())
  commentId  String
  comment    Comment      @relation(fields: [commentId], references: [id], onDelete: Cascade)
  reporterId String
  reporter   User         @relation(fields: [reporterId], references: [id], onDelete: Cascade)
  reason     ReportReason
  detail     String?      @db.Text
  status     ReportStatus @default(PENDING)
  createdAt  DateTime     @default(now())

  @@index([commentId])
  @@index([reporterId])
  @@index([status])
  @@map("comment_reports")
}

// ì‹ ê³  ì‚¬ìœ 
enum ReportReason {
  SPAM          // ìŠ¤íŒ¸
  ABUSE         // ìš•ì„¤/ë¹„ë°©
  INAPPROPRIATE // ë¶€ì ì ˆí•œ ë‚´ìš©
  FRAUD         // ì‚¬ê¸°/í—ˆìœ„ì •ë³´
  ETC           // ê¸°íƒ€
}

// ì‹ ê³  ìƒíƒœ
enum ReportStatus {
  PENDING   // ëŒ€ê¸°ì¤‘
  REVIEWED  // ê²€í† ì™„ë£Œ
  RESOLVED  // ì²˜ë¦¬ì™„ë£Œ
  REJECTED  // ë°˜ë ¤
}

// ì•Œë¦¼ (3ê°€ì§€ë§Œ)
model Notification {
  id         String           @id @default(cuid())
  userId     String
  user       User             @relation(fields: [userId], references: [id], onDelete: Cascade)
  type       NotificationType
  title      String
  content    String
  link       String?
  isRead     Boolean          @default(false)
  createdAt  DateTime         @default(now())

  @@index([userId])
  @@index([isRead])
  @@index([createdAt])
  @@map("notifications")
}

// ì•Œë¦¼ íƒ€ì… (3ê°€ì§€ë§Œ)
enum NotificationType {
  COMMENT       // ëŒ“ê¸€
  ACCEPTED      // ì±„íƒ
  NOTICE        // ê³µì§€ì‚¬í•­
}

// User ëª¨ë¸ì— ì¶”ê°€í•  ê´€ê³„
model User {
  // ... ê¸°ì¡´ í•„ë“œë“¤ ...

  // ì»¤ë®¤ë‹ˆí‹° ê´€ê³„
  posts           Post[]
  comments        Comment[]
  postLikes       PostLike[]
  postReports     PostReport[]
  commentReports  CommentReport[]
  notifications   Notification[]
}
```

### ì¸ë±ìŠ¤ ì „ëµ
- `(category, createdAt)` - ì¹´í…Œê³ ë¦¬ë³„ ìµœì‹ ê¸€
- `(category, likesCount)` - ì¹´í…Œê³ ë¦¬ë³„ ì¸ê¸°ê¸€
- `(authorId, createdAt)` - ì‚¬ìš©ìë³„ ê¸€ ëª©ë¡

---

## API ì„¤ê³„

### REST API ì—”ë“œí¬ì¸íŠ¸

#### ê²Œì‹œê¸€ API
```typescript
// ê²Œì‹œê¸€ ëª©ë¡
GET    /api/community/posts
Query: ?category=FREE&page=1&limit=20&sort=latest

// ê²Œì‹œê¸€ ìƒì„¸
GET    /api/community/posts/[id]

// ê²Œì‹œê¸€ ì‘ì„±
POST   /api/community/posts
Body: { title, content, category, images? }

// ê²Œì‹œê¸€ ìˆ˜ì •
PUT    /api/community/posts/[id]
Body: { title?, content?, images? }

// ê²Œì‹œê¸€ ì‚­ì œ
DELETE /api/community/posts/[id]

// ê²Œì‹œê¸€ ì¢‹ì•„ìš” í† ê¸€
POST   /api/community/posts/[id]/like

// ê²Œì‹œê¸€ ì‹ ê³ 
POST   /api/community/posts/[id]/report
Body: { reason, detail? }
```

#### ëŒ“ê¸€ API
```typescript
// ëŒ“ê¸€ ëª©ë¡
GET    /api/community/posts/[postId]/comments

// ëŒ“ê¸€ ì‘ì„±
POST   /api/community/posts/[postId]/comments
Body: { content }

// ëŒ“ê¸€ ìˆ˜ì •
PUT    /api/community/comments/[id]
Body: { content }

// ëŒ“ê¸€ ì‚­ì œ
DELETE /api/community/comments/[id]

// ëŒ“ê¸€ ì±„íƒ (Q&Aë§Œ)
POST   /api/community/comments/[id]/accept

// ëŒ“ê¸€ ì‹ ê³ 
POST   /api/community/comments/[id]/report
Body: { reason, detail? }
```

#### ì‚¬ìš©ì API
```typescript
// ë‚´ ê²Œì‹œê¸€ ëª©ë¡
GET    /api/community/my/posts

// ë‚´ ëŒ“ê¸€ ëª©ë¡
GET    /api/community/my/comments

// ì•Œë¦¼ ëª©ë¡
GET    /api/community/notifications
Query: ?unreadOnly=true

// ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬
PUT    /api/community/notifications/[id]/read

// ëª¨ë“  ì•Œë¦¼ ì½ìŒ
PUT    /api/community/notifications/read-all
```

#### ê´€ë¦¬ì API
```typescript
// ì‹ ê³  ëª©ë¡
GET    /api/admin/community/reports
Query: ?status=PENDING&type=post

// ì‹ ê³  ì²˜ë¦¬
PUT    /api/admin/community/reports/[id]
Body: { status, action }

// ê²Œì‹œê¸€ ê´€ë¦¬ (ì‚­ì œ, ê³µì§€ ê³ ì •)
PUT    /api/admin/community/posts/[id]/manage
Body: { isPinned?, isDeleted? }
```

---

## UI/UX ì„¤ê³„

### í˜ì´ì§€ êµ¬ì¡° (ë‹¨ìˆœí™”)

```
/community
â”œâ”€â”€ index - ì»¤ë®¤ë‹ˆí‹° ë©”ì¸ (3ê°œ ì¹´í…Œê³ ë¦¬ íƒ­)
â”œâ”€â”€ post/[id] - ê²Œì‹œê¸€ ìƒì„¸
â”œâ”€â”€ write - ê¸€ì“°ê¸°
â””â”€â”€ my - ë‚´ í™œë™ (ê²Œì‹œê¸€, ëŒ“ê¸€)
```

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸

#### 1. ì»¤ë®¤ë‹ˆí‹° ë©”ì¸
```tsx
<CommunityMain>
  <Tabs>
    - ììœ ê²Œì‹œíŒ
    - Q&A
    - ê³µì§€ì‚¬í•­
  </Tabs>

  <PostList>
    {ê³µì§€ ê³ ì •ê¸€}
    {ì¼ë°˜ ê²Œì‹œê¸€ ëª©ë¡}
  </PostList>
</CommunityMain>
```

#### 2. ê²Œì‹œê¸€ ì¹´ë“œ
```tsx
<PostCard>
  - ì¹´í…Œê³ ë¦¬ ë±ƒì§€
  - ì œëª©
  - ì‘ì„±ì, ì‘ì„±ì¼
  - ğŸ‘ ì¢‹ì•„ìš” ìˆ˜
  - ğŸ’¬ ëŒ“ê¸€ ìˆ˜
  - ğŸ‘ï¸ ì¡°íšŒìˆ˜
  - [Q&A] âœ… í•´ê²°ë¨ í‘œì‹œ
</PostCard>
```

#### 3. ê²Œì‹œê¸€ ìƒì„¸
```tsx
<PostDetail>
  <PostHeader>
    - ì¹´í…Œê³ ë¦¬ ë±ƒì§€
    - ì œëª©
    - ì‘ì„±ì (ì•„ë°”íƒ€, ë‹‰ë„¤ì„)
    - ì‘ì„±ì¼, ì¡°íšŒìˆ˜
  </PostHeader>

  <PostContent>
    - ë³¸ë¬¸
    - ì´ë¯¸ì§€ (ìˆì„ ê²½ìš°)
  </PostContent>

  <PostActions>
    - ğŸ‘ ì¢‹ì•„ìš” ({count})
    - ğŸš¨ ì‹ ê³ 
    - ìˆ˜ì •/ì‚­ì œ (ì‘ì„±ìë§Œ)
  </PostActions>

  <CommentSection>
    - ëŒ“ê¸€ ëª©ë¡
    - ëŒ“ê¸€ ì‘ì„± í¼
    - [Q&A] ì±„íƒ ë²„íŠ¼ (ì‘ì„±ìë§Œ)
  </CommentSection>
</PostDetail>
```

#### 4. ê¸€ì“°ê¸°
```tsx
<PostEditor>
  <CategorySelect>
    - ììœ ê²Œì‹œíŒ
    - Q&A
  </CategorySelect>

  <TitleInput placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" />

  <ContentEditor placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" />

  <ImageUpload>
    - ì´ë¯¸ì§€ ì²¨ë¶€ (ì„ íƒ, ìµœëŒ€ 3ì¥)
  </ImageUpload>

  <SubmitButton>ì‘ì„±í•˜ê¸°</SubmitButton>
</PostEditor>
```

### ë°˜ì‘í˜• ë””ìì¸

#### ë°ìŠ¤í¬í†±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Navigation                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ íƒ­   â”‚  ê²Œì‹œê¸€ ëª©ë¡                     â”‚
â”‚ â”Œâ”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ìâ”‚ â”‚  â”‚ ğŸ“Œ [ê³µì§€] ì´ìš©ê·œì¹™      â”‚   â”‚
â”‚ â”‚ìœ â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â””â”€â”€â”˜ â”‚  â”‚ [ììœ ] ì œëª©...          â”‚   â”‚
â”‚ â”Œâ”€â”€â” â”‚  â”‚ ì‘ì„±ì Â· 1ì‹œê°„ ì „        â”‚   â”‚
â”‚ â”‚Q â”‚ â”‚  â”‚ ğŸ‘3 ğŸ’¬2 ğŸ‘50            â”‚   â”‚
â”‚ â”‚&â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚A â”‚ â”‚  â”‚ [Q&A] âœ… ì§ˆë¬¸ì…ë‹ˆë‹¤...  â”‚   â”‚
â”‚ â””â”€â”€â”˜ â”‚  â”‚ ì‘ì„±ì Â· 2ì‹œê°„ ì „        â”‚   â”‚
â”‚ â”Œâ”€â”€â” â”‚  â”‚ ğŸ‘12 ğŸ’¬8 ğŸ‘120          â”‚   â”‚
â”‚ â”‚ê³µâ”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ â”‚ì§€â”‚ â”‚                                 â”‚
â”‚ â””â”€â”€â”˜ â”‚  [í˜ì´ì§€ë„¤ì´ì…˜]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ëª¨ë°”ì¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ˜ï¸ ì»¤ë®¤ë‹ˆí‹°           â”‚
â”‚  [ììœ ] [Q&A] [ê³µì§€]    â”‚
â”‚  [ê²€ìƒ‰] [ê¸€ì“°ê¸°]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Œ [ê³µì§€] ì´ìš©ê·œì¹™     â”‚
â”‚  ğŸ‘12 ğŸ’¬5 ğŸ‘200        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ììœ ] ì œëª©...        â”‚
â”‚  ì‘ì„±ì Â· 1ì‹œê°„ ì „      â”‚
â”‚  ğŸ‘3 ğŸ’¬2 ğŸ‘50          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Q&A] âœ… ì§ˆë¬¸ì…ë‹ˆë‹¤... â”‚
â”‚  ì‘ì„±ì Â· 2ì‹œê°„ ì „      â”‚
â”‚  ğŸ‘12 ğŸ’¬8 ğŸ‘120        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## êµ¬í˜„ ë‹¨ê³„

### Phase 1: ê¸°ë³¸ ê²Œì‹œíŒ (1ì£¼)

#### Day 1-2: ë°ì´í„°ë² ì´ìŠ¤
- âœ… Prisma ìŠ¤í‚¤ë§ˆ ì‘ì„±
- âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
- âœ… ì‹œë“œ ë°ì´í„° (ìƒ˜í”Œ ê²Œì‹œê¸€)

#### Day 3-4: ê²Œì‹œê¸€ API
- âœ… ê²Œì‹œê¸€ CRUD API
- âœ… ì¢‹ì•„ìš” API
- âœ… ì‹ ê³  API

#### Day 5-7: ê²Œì‹œíŒ UI
- âœ… ì»¤ë®¤ë‹ˆí‹° ë©”ì¸ í˜ì´ì§€
- âœ… ê²Œì‹œê¸€ ëª©ë¡ (3ê°œ íƒ­)
- âœ… ê²Œì‹œê¸€ ìƒì„¸ í˜ì´ì§€
- âœ… ê¸€ì“°ê¸° í˜ì´ì§€

### Phase 2: ëŒ“ê¸€ ì‹œìŠ¤í…œ (3ì¼)

#### Day 1: ëŒ“ê¸€ API
- âœ… ëŒ“ê¸€ CRUD API
- âœ… ì±„íƒ API (Q&Aìš©)

#### Day 2-3: ëŒ“ê¸€ UI
- âœ… ëŒ“ê¸€ ëª©ë¡ ì»´í¬ë„ŒíŠ¸
- âœ… ëŒ“ê¸€ ì‘ì„± í¼
- âœ… ì±„íƒ ë²„íŠ¼ (Q&A)

### Phase 3: ì•Œë¦¼ ì‹œìŠ¤í…œ (2ì¼)

#### Day 1: ì•Œë¦¼ ë°±ì—”ë“œ
- âœ… ì•Œë¦¼ ìƒì„± ë¡œì§
- âœ… ì•Œë¦¼ API

#### Day 2: ì•Œë¦¼ UI
- âœ… ì•Œë¦¼ ëª©ë¡ í˜ì´ì§€
- âœ… ì•Œë¦¼ ë±ƒì§€ (í—¤ë”)

### Phase 4: ê´€ë¦¬ì ê¸°ëŠ¥ (2ì¼)

#### Day 1: ê´€ë¦¬ì API
- âœ… ì‹ ê³  ê´€ë¦¬ API
- âœ… ê²Œì‹œê¸€ ê´€ë¦¬ API

#### Day 2: ê´€ë¦¬ì UI
- âœ… ì‹ ê³  ëª©ë¡ í˜ì´ì§€
- âœ… ê²Œì‹œê¸€ ê´€ë¦¬ ê¸°ëŠ¥

---

## ë³´ì•ˆ ë° ê¶Œí•œ

### ê¶Œí•œ ì²´í¬

```typescript
// ê²Œì‹œê¸€ ì‘ì„±: ë¡œê·¸ì¸ í•„ìš”
export async function requireAuth(req: NextRequest) {
  const session = await getServerSession(authOptions);
  if (!session) throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
  return session;
}

// ì‘ì„±ì í™•ì¸
export async function requireOwner(postId: string, userId: string) {
  const post = await prisma.post.findUnique({ where: { id: postId } });
  if (post?.authorId !== userId) throw new Error('ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.');
  return post;
}

// ê´€ë¦¬ì í™•ì¸
export async function requireAdmin(userId: string) {
  const user = await prisma.user.findUnique({ where: { id: userId } });
  if (user?.role !== 'ADMIN') throw new Error('ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
  return user;
}
```

### XSS ë°©ì–´
- ê²Œì‹œê¸€ ë‚´ìš© sanitize (DOMPurify)
- HTML ì´ìŠ¤ì¼€ì´í”„

### Rate Limiting
```typescript
// ê²Œì‹œê¸€ ì‘ì„±: 1ë¶„ì— 3ê°œ
// ëŒ“ê¸€ ì‘ì„±: 1ë¶„ì— 10ê°œ
// ì¢‹ì•„ìš”: 1ë¶„ì— 30ê°œ
```

---

## ì„±ëŠ¥ ìµœì í™”

### 1. ë°ì´í„°ë² ì´ìŠ¤
```sql
-- ì¸ë±ìŠ¤
CREATE INDEX idx_posts_category_created ON posts(category, created_at DESC);
CREATE INDEX idx_posts_likes ON posts(likes_count DESC);
```

### 2. ìºì‹±
```typescript
// ì¸ê¸° ê²Œì‹œê¸€ ìºì‹± (1ì‹œê°„)
const cacheKey = 'community:popular:1h';
await redis.setex(cacheKey, 3600, JSON.stringify(posts));
```

### 3. í˜ì´ì§€ë„¤ì´ì…˜
```typescript
// Cursor ê¸°ë°˜ í˜ì´ì§€ë„¤ì´ì…˜
const posts = await prisma.post.findMany({
  take: 20,
  cursor: { id: lastPostId },
  orderBy: { createdAt: 'desc' }
});
```

---

## ì¶”ì • ì‘ì—… ì‹œê°„

| Phase | ë‚´ìš© | ì˜ˆìƒ ì‹œê°„ |
|-------|------|-----------|
| Phase 1 | ê¸°ë³¸ ê²Œì‹œíŒ (DB, API, UI) | 1ì£¼ |
| Phase 2 | ëŒ“ê¸€ ì‹œìŠ¤í…œ | 3ì¼ |
| Phase 3 | ì•Œë¦¼ ì‹œìŠ¤í…œ | 2ì¼ |
| Phase 4 | ê´€ë¦¬ì ê¸°ëŠ¥ | 2ì¼ |
| **Total** | | **ì•½ 2ì£¼** |

---

## í–¥í›„ í™•ì¥ ê°€ëŠ¥ì„±

í•„ìš”ì‹œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë“¤:
- ğŸ”² ë‹¨ì§€ë³„ ê²Œì‹œíŒ (ë³µì¡ë„ ë†’ìŒ)
- ğŸ”² ê±°ë˜ í›„ê¸° (ê²€ì¦ ì‹œìŠ¤í…œ í•„ìš”)
- ğŸ”² ëŒ€ëŒ“ê¸€ (1ë‹¨ê³„ â†’ 2ë‹¨ê³„)
- ğŸ”² ë¶ë§ˆí¬ ê¸°ëŠ¥
- ğŸ”² ëŒ“ê¸€ ì¢‹ì•„ìš”
- ğŸ”² ë“±ê¸‰/ë±ƒì§€ ì‹œìŠ¤í…œ

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-17
**ë²„ì „**: 2.0 (ë‹¨ìˆœí™”)
