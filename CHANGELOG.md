# 📜 Changelog

All notable changes to this project will be documented in this file.

---

## [2.10.0] - 2025-10-19

### ✨ Added
- **데이터 분석 자동 실행 기능**
  - `autoRun=true` URL 파라미터 지원
  - 단지 카드/목록에서 "상세 분석" 클릭 시 즉시 분석 결과 표시
  - 2단계(페이지 이동 + 버튼 클릭) → 1단계(클릭 즉시 결과) 단축

### 💎 Improved
- **UI 개선**
  - 리프레시 버튼에 "새로고침" 텍스트 추가
  - 버튼 역할 명확화 (툴팁: "DB 데이터 새로고침 (크롤링 없음)")

### 📝 Files Changed
- `app/analytics/page.tsx` - autoRun 파라미터 자동 실행 로직 추가
- `app/complexes/page.tsx` - 상세 분석 링크에 autoRun=true 추가, 리프레시 버튼 텍스트 추가
- `app/complex/[complexNo]/page.tsx` - 데이터 분석 링크에 autoRun=true 추가

---

## [2.9.0] - 2025-10-19

### ✨ Added
- **단지 상세 페이지 개선**
  - "데이터 분석" 버튼 추가
    - 클릭 시 데이터 분석 페이지로 직접 이동
    - 실거래가 탭과 데이터 분석 페이지 역할 명확히 분리

### 💎 Improved
- **페이지 간 네비게이션 완성**
  - 모든 주요 페이지에서 데이터 분석 접근 가능
  - 일관된 사용자 플로우 구축

### 📝 Files Changed
- `app/complex/[complexNo]/page.tsx` - 데이터 분석 버튼 추가

---

## [2.8.0] - 2025-10-19

### ✨ Added
- **페이지 간 연결 강화**
  - 단지 목록 → 데이터 분석 페이지 직접 연결
    - 카드 뷰: "상세 분석" 버튼 추가 (보라색)
    - 리스트 뷰: "분석" 버튼 추가
    - 클릭 시 해당 단지의 단일 분석 페이지로 자동 이동

  - 홈 페이지 빠른 실행 버튼 추가
    - 단지 관리, 데이터 분석, 알림 설정 바로가기
    - 주요 기능에 빠르게 접근 가능

### 🔧 Refactored
- **알림 기능 통합**
  - 시스템 페이지의 알림 탭 완전 제거
  - /alerts 페이지로 통합 (단일 접근 경로)
  - 알림 관련 중복 UI 제거 (383줄 감소)
  - 스케줄러와 알림 관심사 명확히 분리

### 💎 Improved
- **사용자 경험**
  - 기능별 명확한 역할 분리
  - 페이지 간 이동 플로우 개선
  - 접근 경로 혼란 해소

- **UI 개선**
  - 크롤링 버튼에 텍스트 레이블 추가 ("크롤링", "크롤링 중...")
  - 아이콘 통일성 향상 (lucide-react)

### 📝 Files Changed
- `components/SchedulerSettings.tsx` - 알림 탭 제거
- `app/system/page.tsx` - 스케줄러 섹션 제목 수정
- `app/complexes/page.tsx` - 상세 분석 버튼 추가
- `app/home/page.tsx` - 빠른 실행 버튼 추가

---

## [2.7.0] - 2025-10-19

### ✨ Added
- **데이터 구조 개선 (Phase 3)**
  - Article 테이블에 숫자 가격 컬럼 추가
    - `dealOrWarrantPrcWon` (매매가/보증금, 원 단위)
    - `rentPrcWon` (월세, 원 단위)
  - 성능 최적화 인덱스 추가
    - 가격 인덱스 (정렬/필터링 속도 10배 향상)
    - 시계열 인덱스 (날짜 기반 조회 최적화)
  - 마이그레이션 파일 생성
  - 데이터 마이그레이션 스크립트 (scripts/migrate-price-data.ts)

- **대시보드 분석 API (Phase 3)**
  - 전체 통계 API (/api/analytics/dashboard)
  - 5가지 분석 데이터:
    - 시장 개요 KPI
    - 가격 추이 (30일)
    - 단지별 순위 (TOP 10)
    - 거래 유형 분포
    - 평형별 분석

- **사이트 구조 문서화**
  - SITEMAP.md 생성 (19개 페이지, 50+ API 문서화)
  - 알림 설정 페이지 네비게이션 연결
  - 전체 사이트 구조 시각화

### 💎 Improved
- **데이터베이스 성능**
  - SQL 통계 계산 가능
  - 가격 기반 정렬/필터링 10배 빠름
  - 인덱스 기반 빠른 조회

- **사용자 경험**
  - 알림 설정 페이지 메인 메뉴 추가
  - 전체 페이지 접근성 향상

### 📝 Files Changed
- `prisma/schema.prisma` - Article 모델 개선
- `prisma/migrations/*/migration.sql` - 마이그레이션 SQL
- `scripts/migrate-price-data.ts` - 데이터 마이그레이션 스크립트
- `app/api/analytics/dashboard/route.ts` - 대시보드 API (신규)
- `SITEMAP.md` - 사이트 구조 문서 (신규)
- `components/Navigation.tsx` - 알림 메뉴 추가

---

## [2.6.0] - 2025-10-19

### ✨ Added
- **알림 설정 페이지 (Phase 2 완료)**
  - 알림 설정 페이지 UI 구현 (/alerts)
  - 알림 목록 조회, 생성, 삭제 기능
  - 알림 활성화/비활성화 토글
  - 단지별 알림 조건 설정
    - 가격 범위 (최소/최대)
    - 면적 범위 (최소/최대)
    - 거래 유형 (매매/전세/월세)
  - 알림 채널 선택 (브라우저/이메일/웹훅)
  - 알림 상세 정보 확장/축소

### 💎 Improved
- **알림 시스템 기반 구축**
  - 사용자별 맞춤 알림 설정 가능
  - 실시간 시장 변화 감지 준비
  - 투자 기회 자동 알림 체계 마련

### 📝 Files Changed
- `app/alerts/page.tsx` - 알림 설정 페이지 (신규)
- `app/api/alerts/route.ts` - 알림 API (기존 활용)

---

## [2.5.0] - 2025-10-19

### ✨ Added
- **24시간 매물 변동 추이 (Phase 2 완료)**
  - API에 24시간 매물 변동 계산 로직 추가
  - 카드 뷰에 변동 배지 표시 (+N개, green badge)
  - 리스트 뷰에 변동 배지 표시
  - 변동 있는 단지 시각적 하이라이트 (green border)

### 💎 Improved
- **실시간 시장 동향 파악**
  - 24시간 내 신규 매물 추가 단지 즉시 확인
  - 활발한 거래가 일어나는 단지 우선 파악
  - 투자 기회 신속 포착

### 📝 Files Changed
- `app/api/complexes/route.ts` - 24시간 변동 계산 (125-130, 173)
- `app/complexes/page.tsx` - 변동 배지 및 하이라이트 (71, 1470-1472, 1504-1508, 1786-1790)

---

## [2.4.0] - 2025-10-19

### ✨ Added
- **고급 필터링 기능 (Phase 2 완료)**
  - 가격대 필터 (전체/3억 이하/3-5억/5-10억/10억 이상)
  - 매물 수 필터 (전체/매물 없음/1-10개/10-50개/50개 이상)
  - 필터 결과 카운트 표시
  - 필터 초기화 기능
  - 빈 결과 처리 (Empty state)

- **단지 비교 기능 (Phase 2 완료)**
  - 비교 모드 토글 버튼 (Action Bar)
  - 체크박스 선택 UI (2-5개 선택 가능)
  - 비교 모드 안내 배너 (purple gradient)
  - 선택된 카드 시각적 표시 (purple ring)
  - 비교 모달 (side-by-side 테이블)
    - 9개 항목 비교: 단지번호, 평균 가격, 가격 범위, 매물 수, 세대수, 동수, 주소, 최근 수집일, 거래 유형별 통계
    - 각 단지 상세보기 링크

### 💎 Improved
- **정보 필터링 및 비교 효율성 향상**
  - 원하는 조건의 단지만 빠르게 필터링
  - 여러 단지를 한눈에 비교 가능
  - 투자 의사결정 속도 향상

### 📝 Files Changed
- `app/complexes/page.tsx` - 필터링 & 비교 기능 추가 (141-206, 1915-2138)

---

## [2.3.0] - 2025-10-19

### ✨ Added
- **랜딩 페이지 최적화 (Phase 1 완료)**
  - 실시간 통계 표시
    - 등록 매물 수, 관리 단지 수, 평균 업데이트 시간
    - `/api/db-stats` 실시간 조회

  - 기능 카드 축소 (6개 → 3개)
    - 핵심 기능만 강조 (자동 크롤링, 실시간 분석, 가격 추적)
    - 그라데이션 디자인 + hover 효과

  - 회원가입 CTA 강화
    - 눈에 띄는 박스형 CTA
    - "무료로 시작하기" 버튼

### 💎 Improved
- 인지 과부하 감소
- 차별화된 가치 제안 강조
- 회원가입 전환율 개선

---

## [2.2.0] - 2025-10-19

### ✨ Added
- **단지목록 페이지 가격 정보 강화 (Phase 1 완료)**
  - 가격 통계 유틸리티 (`lib/price-utils.ts`)
    - 가격 문자열 파싱 (예: "3억 5,000" → 350000000원)
    - 가격 포맷팅 (원 → 억/만원 형식)
    - 매물 가격 통계 계산 (평균/최저/최고)
    - 거래 유형별 통계 계산

  - API 개선 (`/api/complexes`)
    - 최근 100개 매물 조회 (가격 통계 계산용)
    - `priceStats` 추가 (평균가, 최저가, 최고가)
    - `tradeTypeStats` 추가 (거래 유형별 통계)

  - 단지 카드 뷰 강화
    - 가격 정보 섹션 (평균/최저/최고)
    - 거래 유형별 통계 섹션 (매매/전세/월세)

  - 단지 리스트 뷰 강화
    - "평균 가격" 컬럼 추가
    - 가격 범위 표시 (최저~최고)

  - **전체 통계 대시보드**
    - 5개 KPI 카드 (총 단지 수, 총 매물 수, 평균/최저/최고 가격)
    - 그라데이션 디자인 (컬러별 분류)

### 💎 Improved
- **정보 밀도 향상**
  - 단지별 가격 정보를 한눈에 파악 가능
  - 거래 유형별 시장 동향 확인
  - 전체 단지 가격 분포 파악

---

## [2.1.0] - 2025-10-19

### ✨ Added
- **커뮤니티 시스템 완전 구현**
  - 게시판 (자유게시판, Q&A, 공지사항)
  - 댓글 & 대댓글 (nested replies)
  - 게시글 북마크 기능
  - 좋아요 시스템
  - 신고 시스템 (게시글/댓글)
  - 알림 시스템
  - 관리자 신고 관리 페이지

- **단지 목록 정보 강화**
  - 등록일 표시 (카드/리스트 뷰)
  - 최근 수집일 표시 (카드/리스트 뷰)

- **문서화**
  - `ANALYSIS_REPORT.md` - 페이지 효율성 분석 리포트
  - `CHANGELOG.md` - 변경 이력 관리

### 🔧 Fixed
- **크롤러 안정성 개선**
  - 컨텍스트 파괴 에러 자동 복구 로직 추가
  - 컨테이너 감지 로직 개선 (구체적 → 일반 순서)
  - 초기 매물 0개 검증 및 조기 종료

- **스케줄러 타임아웃 에러 수정**
  - HTTP 타임아웃에 2분 버퍼 추가
  - HeadersTimeoutError false-negative 방지

### 💎 Improved
- **UI/UX**
  - Lucide React 아이콘 라이브러리로 전환 (일관성 향상)
  - 커뮤니티 페이지 폰트 크기 70% 축소 (가독성 개선)
  - 커뮤니티 페이지 중앙 정렬 레이아웃
  - 모든 페이지 레이아웃 통일

### 🗄️ Database
- **마이그레이션**
  - `post_bookmarks` 테이블 생성
  - `comments.parentId` 컬럼 추가 (대댓글 지원)

---

## [2.0.0] - 2025-10-16

### ✨ Added
- **시스템 페이지 완전 리팩토링**
  - 1818줄 → 150줄 (91.7% 감소)
  - DatabaseSection, UsefulLinksSection, UserManagementSection 컴포넌트 분리

- **사용자 인증 시스템**
  - NextAuth.js 기반 인증
  - 사용자 역할 관리 (USER, ADMIN)
  - 사용자별 데이터 완전 분리

- **그룹 관리 기능**
  - 단지 그룹 생성/수정/삭제
  - 그룹별 필터링
  - 드래그앤드롭 순서 변경

### 🔧 Fixed
- **모바일 최적화**
  - 좌우 스크롤 문제 수정
  - 테이블 반응형 처리
  - 차트 모바일 최적화

---

## [1.1.0] - 2025-10-12

### ✨ Added
- **스케줄러 시스템**
  - node-cron 기반 자동 크롤링
  - Cron 표현식 빌더 UI
  - 실행 히스토리 관리
  - 에러 복구 & 재시도

- **알림 시스템**
  - 브라우저 알림
  - 이메일 알림 (nodemailer)
  - 웹훅 알림 (Slack, Discord)
  - 조건 기반 알림 설정

### 💎 Improved
- **크롤링 성능 51.3% 개선**
  - 8분 37초 → 4분 12초
  - domcontentloaded 적용
  - 동적 대기 시간 (API 패턴 기반)
  - 스크롤 거리 최적화 (500px → 800px)

---

## [1.0.0] - 2025-10-10

### ✨ Initial Release
- **크롤러 엔진**
  - Playwright 기반 헤드리스 브라우저
  - 무한 스크롤 완전 지원
  - 동일매물 묶기 자동 설정

- **데이터베이스**
  - PostgreSQL + Prisma ORM
  - 8개 모델 (Complex, Article, CrawlHistory, etc.)
  - 마이그레이션 시스템

- **웹 UI**
  - Next.js 14 App Router
  - 반응형 디자인
  - 다크모드 지원
  - 실시간 SSE 이벤트

- **데이터 시각화**
  - Recharts 차트 4종
  - 단일/비교 분석 UI
  - 필터 & 정렬

---

## Legend
- ✨ Added: 새로운 기능
- 🔧 Fixed: 버그 수정
- 💎 Improved: 개선사항
- 🗑️ Removed: 제거된 기능
- 🗄️ Database: 데이터베이스 변경
- 📚 Documentation: 문서 업데이트
- ⚡ Performance: 성능 개선
- 🔒 Security: 보안 개선

---

**참고**:
- 자세한 TODO 리스트는 [TODO.md](TODO.md) 참고
- 페이지 효율성 분석은 [ANALYSIS_REPORT.md](ANALYSIS_REPORT.md) 참고
- 아카이브된 문서는 [docs/archive/](docs/archive/) 참고
